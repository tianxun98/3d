!function(U,D){"use strict";var t="ht",b=U[t],K="position",E="absolute",M="px",T="left",p="top",m="innerHTML",Y="className",z="width",d="height",W="0",P="display",I="none",B="visibility",j="user-select",$="margin",i="padding",H=null,e=b.Color,G=b.Default,u=G.getInternal(),o=U.setTimeout,J=U.setInterval,c=U.clearTimeout,y=U.clearInterval,a=U.parseInt,x=G.isLeftButton,S=G.isDragging,A=G.startDragging,l=G.getDistance,N=G.isTouchable,h=e.widgetIconHighlight,v=e.widgetIconBorder,Z=e.widgetIconGradient,C=function(){return document},Q=function(c,V){return c.querySelectorAll(V)},V=function(E){var o=C().createElement(E);return"ul"===E&&(r(o,K,"relative"),r(o,$,W),r(o,i,W),r(o,"list-style",I),r(o,"box-sizing","border-box"),r(o,"-moz-box-sizing","border-box"),r(o,P,"inline-block"),r(o,"vertical-align","text-bottom"),r(o,"border","1px solid "+G.contextMenuBorderColor),r(o,"box-shadow","0 0 16px 1px "+G.contextMenuShadowColor),r(o,"overflow","hidden"),G.contextMenuBorderRadius&&r(o,"border-radius",G.contextMenuBorderRadius+M)),o},w=function(U){var p=U.touches[0];return p?p:U.changedTouches[0]},F=function(){return V("div")},q=function(){return V("canvas")},r=function(D,z,U){D.style.setProperty(z,U,H)},R=function(s,l,S){G.def(b.widget[s],l,S)},g=function(i,v){i.appendChild(v)},X=function(c,I){c.removeChild(I)},n=G.eventListenerOptionsFalse,f=(G.eventListenerOptionsTrue,function(Z,V,b,D){Z.addEventListener(V,b,D?n:n)}),s=function(T,N,z,O){T.removeEventListener(N,z,O?n:n)};u.addMethod(G,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:v},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:h}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:v},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:h,gradient:G.imageGradient,gradientColor:Z,background:h}]},contextMenuLabelFont:(N?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var k=function(e){var P=this,Q=e._view;if(P.$11b=e,P.addListeners(),f(Q,"contextmenu",function(l){l.preventDefault()}),!N){var T=P.$37b=P.$36b.bind(P);f(Q,"mouseover",T),f(Q,"mouseout",T)}};G.def(k,D,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(f){if(G.preventDefault(f),x(f)){for(var E=this,Y=E.$11b,Q=E.getView(),W=Q.children,H=0;H<W.length;H++){var g=W[H],i=g.$24b,I=g.$25b;if(i&&i.contains(f.target))return Y.scrollUp(g),E.$28b=o(function(){E.$29b=J(function(){Y.scrollUp(g)},100)},500),A(E,f),void 0;if(I&&I.contains(f.target))return Y.scrollDown(g),E.$28b=o(function(){E.$29b=J(function(){Y.scrollDown(g)},100)},500),A(E,f),void 0}N&&(f=w(f)),E.$30b={x:f.pageX,y:f.pageY}}},handle_mousedown:function(K){this.handle_touchstart(K)},handle_touchend:function(z){if(x(z)){var y=this,X=y.$30b,P=N?{x:w(z).pageX,y:w(z).pageY}:{x:z.pageX,y:z.pageY};if(!X||l(X,P)>1)return delete y.$30b,void 0;for(var p=y.getView(),f=y.$11b,V=z.target,c=H,A=H,s=f._items,Q=p.$26b,U=0;U<Q.length;U++)if(A=Q[U],A.contains(V)){c=A.getAttribute("data-id");break}if(c&&s){var g=f.$17b(s,function(E){return E._id===c});if(g){var Y=!1;g.disabled instanceof Function?Y=g.disabled.call(f,g):g.disabled===!0&&(Y=!0),Y||(g.items?N&&y.$36b(A,!0):f.$1b(g,z))}}delete y.$30b}},$36b:function(W,V){if(!S()){var l,_=this,O=_.$11b,J=_.getView(),j=O.$20b||J.children[0],R=O.$19b,h=J.$26b,f=J.children,v=W.target,t=J.getBoundingClientRect(),C=G.getWindowInfo(),X=C.width,P=C.height,k=function(w){for(var X=0;X<f.length;X++){var R=f[X],M=new RegExp(w+"$"),y=R[Y];if(y&&(M.test(y)||y.indexOf(w+" ")>=0))return R}},Z=function(z){for(var g=0;g<h.length;g++){var e=h[g],M=new RegExp(z+"$"),L=e[Y];if(L&&(M.test(L)||L.indexOf(z+" ")>=0))return e}},L=function(o){var k=Z("menu-item"+o.$45b),E=k.getBoundingClientRect(),u=E.top-t.top,S=E.left-t.left;r(o,p,u+M),r(o,T,S+E.width+M);var U=o.getBoundingClientRect(),x=U.top,H=U.left,W=U.height,i=U.width,L=x+W+2,G=H+i+2;L>P&&r(o,p,u+P-L+M),G>X&&r(o,T,S-i+M)};if(V)l=W;else{if("mouseover"===W.type){for(var K=0;K<h.length;K++){var y=h[K];if(y.contains(v)){l=y;break}}if(!l&&R){var z=R.parentNode,I=k("submenu"+R.getAttribute("data-id"));(I&&I.contains(v)||z&&z.contains(v))&&(l=R)}}else if("mouseout"===W.type){for(var q=!1,$=W.relatedTarget,K=0;K<f.length;K++){var w=f[K];if("hidden"!==w.style.visibility&&w.contains($)){q=!0;break}}if(q)return}!l&&j&&(l=Z("menu-item"+(j.$45b||"NaN")))}if(l!=R){if(R)for(var A=R;A;){if(A[Y]=A[Y].replace(" menu-item-hover",""),A[Y].indexOf("disabled")<0){var g=O.getItemByProperty("_id",A.getAttribute("data-id"));null!=g.background?g.background instanceof Function?r(A,"background-color",g.background.call(O,g)):r(A,"background-color",g.background):r(A,"background-color",G.contextMenuBackground),r(A,"color",G.contextMenuLabelColor)}var F=k("submenu"+A.getAttribute("data-id"));F&&r(F,B,"hidden");var E=A.parentNode;A=Z("menu-item"+(E.$45b||"NaN"))}if(l){for(var d=l,u=[];d;){d[Y]+=" menu-item-hover",d[Y].indexOf("disabled")<0&&(r(d,"background-color",G.contextMenuHoverBackground),r(d,"color",G.contextMenuHoverLabelColor));var s=k("submenu"+d.getAttribute("data-id"));s&&(r(s,B,"visible"),u.push(s));var E=d.parentNode;d=Z("menu-item"+(E.$45b||"NaN"))}u.reverse(),u.forEach(function(I){L(I)})}}O.$19b=l,O.$20b=l?l.parentNode:J.children[0]}},handle_mouseup:function(E){this.handle_touchend(E)},handleWindowTouchEnd:function(){var R=this;R.$28b!=H&&(c(R.$28b),delete R.$28b),R.$29b!=H&&(y(R.$29b),delete R.$29b),delete R.$34b,delete R.$30b,delete R.$35b},handleWindowMouseUp:function(W){this.handleWindowTouchEnd(W)},handle_mousemove:function(G){this.handle_touchmove(G)},handle_touchmove:function(r){if(!S()&&x(r)){for(var e=this,j=e.getView().children,d=H,v=0;v<j.length;v++){var R=j[v];if(R.contains(r.target)){d=R;break}}var z=e.$30b,J=N?{x:w(r).pageX,y:w(r).pageY}:{x:r.pageX,y:r.pageY};d&&z&&l(z,J)>2&&(A(e,r),e.$34b=d,e.$35b=d.$18b)}},handleWindowTouchMove:function(I){I.preventDefault();var j=this,S=j.$11b,G=j.$34b,l=j.$35b,q=j.$30b;if(q&&G){var t=N?{x:w(I).pageX,y:w(I).pageY}:{x:I.pageX,y:I.pageY},K=t.y-q.y;K>0?S.scrollUp(G,G.$18b-(l-K)):S.scrollDown(G,l-K-G.$18b)}},handleWindowMouseMove:function(O){this.handleWindowTouchMove(O)},$10b:function(s,L){s.preventDefault();for(var E=this,Z=E.getView().children,J=H,C=0;C<Z.length;C++){var a=Z[C];if(a.contains(s.target)){J=a;break}}if(J){var V=this.$11b,u=V.getRowHeight();Math.abs(L)>.05&&(L>0?V.scrollUp(J,L*u):0>L&&V.scrollDown(J,-L*u))}},handle_mousewheel:function($){this.$10b($,$.wheelDelta/40)},handle_DOMMouseScroll:function(p){this.$10b(p,-p.detail)},$44b:function(I){this.getView().contains(I.target)||this.$11b.hide()},$41b:function(L){this.$11b.show(L)},$4b:function(u,e){var P=this.$11b;if(e=e||P._items,e&&e.length&&u.keyCode){var W=[u.keyCode];u.shiftKey&&W.push(16),u.ctrlKey&&W.push(17),u.altKey&&W.push(18),/mac/.test(U.navigator?U.navigator.userAgent.toLowerCase():"")?u.metaKey&&W.push(17):u.metaKey&&W.push(91),W.sort();var j=W.join(),x=P.$17b(e,function($){if($.key){var g=$.key.slice(0);return g.sort(),j===g.join()}});if(x){x.preventDefault!==!1&&u.preventDefault();var M=!1;x.disabled instanceof Function?M=x.disabled.call(P,x):x.disabled===!0&&(M=!0),M||P.$1b(x,u)}}},$39b:function(k){var i=this,D=w(k);i.$32b={x:D.pageX,y:D.pageY}},$38b:function(D){var j=this,O=w(D);j.$31b={x:O.pageX,y:O.pageY},j.$33b=o(function(){j.$31b&&(j.$32b?l(j.$31b,j.$32b)<10&&j.$11b.show(D):j.$11b.show(D)),delete j.$33b,delete j.$31b,delete j.$32b},600)},$40b:function(){var e=this;e.$33b!=H&&(c(e.$33b),delete e.$33b,delete e.$31b,delete e.$32b)}}),b.widget.ContextMenu=function(w){var b=this,z=b._view=u.createView(null,b);z[Y]="ht-widget-contextmenu",b.setItems(w),b.$13b=new k(b),r(z,"font",G.contextMenuLabelFont),r(z,K,E),r(z,"cursor","default"),r(z,"-webkit-"+j,I),r(z,"-moz-"+j,I),r(z,"-ms-"+j,I),r(z,j,I),r(z,"box-sizing","border-box"),r(z,"-moz-box-sizing","border-box"),G.baseZIndex!=H&&r(z,"z-index",a(G.baseZIndex)+2+""),b.$3b=function(o){b.$13b.$4b(o)}},R("ContextMenu",D,{$5b:0,_items:H,$21b:H,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var z=this,m=z._enableGlobalKey;m===!1&&(f(C(),"keydown",z.$3b),z._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,s(C(),"keydown",this.$3b)},setItems:function(o){this._items=o},getItems:function(){return this._items},setVisibleFunc:function(E){this.$16b=E},setLabelMaxWidth:function(L){this.$43b=L},$1b:function(h,B){var G=this;if("check"===h.type)h.selected=!h.selected;else if("radio"===h.type){var X=h.groupId;G.$17b(G._items,function(S){S.groupId===X&&(S.selected=!1)}),h.selected=!0}if(G.hide(),h.action)h.action.apply(h.scope||G,[h,B]);else if(h.href){var F=h.linkTarget||"_self";U.open(h.href,F)}},getItemById:function(n){return this.getItemByProperty("id",n)},setItemVisible:function(r,K){var e=this.getItemById(r);e&&(e.visible=K)},getItemByProperty:function(q,U,e){var n=this;if(e=e||n._items,!e||0===e.length)return H;var x=n.$17b(e,function(h){return h[q]===U});return x||H},scrollUp:function(j,R){var q=this;if(R=R==H?20:R,R=a(R),0!==R){var M=0;j.$18b>R&&(M=j.$18b-R),q.$42b(j,M),j.scrollTop=M,j.$18b=M}},scrollDown:function(S,e){var P=this;if(e=e==H?20:e,e=a(e),0!==e){var Y=S.$22b,F=S.$23b,i=Y-F;F+S.$18b+e<Y&&(i=S.$18b+e),P.$42b(S,i),S.scrollTop=i,S.$18b=i}},$42b:function(m,Y){Y=Y==H?m.$18b:Y;var S=m.$24b,s=m.$25b;S&&(r(S,"top",Y+M),0==Y?r(S,P,I):r(S,P,"block")),s&&(r(s,"bottom",-Y+M),Y==m.$22b-m.$23b?r(s,P,I):r(s,P,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function($,h){for(var O=0;O<$.length;O++){var G=$[O];if(h(G))return G;if(G.items){var X=this.$17b(G.items,h);if(X)return X}}},$2b:function(e,R){for(var C=this,k=0;k<e.length;k++){C.$5b++;var w=e[k];if(w.visible!==!1&&!(G.isFunction(w.visible)&&w.visible()===!1||C.$16b&&!C.$16b.call(C,w))){var L=V("li"),I=C.$5b+"";if(r(L,"white-space","nowrap"),r(L,P,"block"),"separator"===w||w.separator===!0){var o=F();o[Y]="separator",r(o,d,G.contextMenuSeparatorWidth+M),r(o,"background",G.contextMenuSeparatorColor),g(L,o)}else{w._id=I,L.setAttribute("data-id",I);var A=V("span"),U=V("span"),p=q(),H=F();if(r(A,P,"inline-block"),r(A,d,"1.2em"),r(U,P,"inline-block"),r(U,d,"1.2em"),r(U,"line-height","1.2em"),p[Y]="prefix",r(p,P,"inline-block"),r(p,z,"1em"),r(p,d,"1em"),r(p,"vertical-align","middle"),r(p,$,"0 0.2em"),"check"===w.type&&w.selected?p[Y]+=" check-prefix":"radio"===w.type&&w.selected&&(p[Y]+=" radio-prefix"),g(L,p),w.icon){var v=q();v[Y]="contextmenu-item-icon",r(v,P,"inline-block"),r(v,d,"1.2em"),r(v,z,"1.2em"),r(v,"margin-right","0.2em"),r(v,"float","left"),v.$50b=w.icon,v._item=w,g(A,v)}if(U[m]=w.label,g(A,U),g(L,A),H[Y]="suffix",r(H,P,"inline-block"),r(H,"margin-left","1em"),r(H,"margin-right","0.4em"),r(H,"text-align","right"),r(H,"font-size","75%"),w.items&&(H[m]=G.contextMenuSubmenuMark),w.suffix&&(H[m]=w.suffix),g(L,H),L[Y]="menu-item menu-item"+I,null!=w.background?w.background instanceof Function?r(L,"background-color",w.background.call(C,w)):r(L,"background-color",w.background):r(L,"background-color",G.contextMenuBackground),r(L,"color",G.contextMenuLabelColor),r(L,i,"3px 0"),w.disabled instanceof Function){var D=w.disabled.call(C,w);D&&(L[Y]+=" disabled",r(L,"color",G.contextMenuDisabledLabelColor))}else w.disabled&&(L[Y]+=" disabled",r(L,"color",G.contextMenuDisabledLabelColor));if(w.items){C.$21b||(C.$21b=new b.List);var S=V("ul");S[Y]="submenu"+I,S.$45b=I,r(S,B,"hidden"),r(S,K,E),g(C._view,S),C.$21b.add(S),C.$2b(w.items,S)}}g(R,L)}}},rebuild:function(){var h=this,o=h._items,i=h._view;if(i&&(i[m]="",h.$21b=H,h.$5b=0,h.$19b=H,h.$20b=H,i.$26b=H,o&&0!==o.length)){var Y=V("ul",h._r);g(i,Y),h.$2b(o,Y)}},addTo:function(m){if(m){var l=this,n=l.$13b;if(l.$12b=m,l.$9b=function(T){n.$44b(T)},l.$27b=function(k){n.$41b(k)},N){var O=l.$6b=function(t){n.$38b(t)},W=l.$7b=function(i){n.$39b(i)},S=l.$8b=function(Y){n.$40b(Y)};f(m,"touchstart",O,!0),f(m,"touchmove",W),f(m,"touchend",S)}else f(m,"contextmenu",l.$27b)}},showOnView:function(N,y,r){N=N.getView?N.getView():N;var B=G.getWindowInfo(),H=N.getBoundingClientRect();this.show(H.left+B.left+y,H.top+B.top+r)},show:function(h,s,i){var b=this,i=i==H?!0:!1,L=b._view;if(L){if(b.invalidate(),1===arguments.length){var x=h;if(N){var V=w(x);h=V.pageX,s=V.pageY}else h=x.pageX,s=x.pageY}var d=G.getWindowInfo(),l=d.width,D=d.height,_=d.left,J=d.top,v={pageX:h,pageY:s,clientX:h-_,clientY:s-J,target:1,originEvent:x},e=v.clientX,u=v.clientY,t=function(Z){Z.style.height=D-6+M;var J=F(),N=F(),f=function(i){r(i,K,E),r(i,"text-align","center"),r(i,z,"100%"),r(i,"font-size",10+M),r(i,"padding","2px 0"),r(i,"border","0px solid "+G.contextMenuScrollerBorderColor),r(i,"background-color",G.contextMenuScrollerColor1),i.style.backgroundImage="-webkit-linear-gradient(top, "+G.contextMenuScrollerColor1+", "+G.contextMenuScrollerColor2+")",i.style.backgroundImage="linear-gradient(to bottom, "+G.contextMenuScrollerColor1+", "+G.contextMenuScrollerColor2+")"};J[Y]="menu-arrow-item menu-arrow-item-top",N[Y]="menu-arrow-item menu-arrow-item-bottom",f(J),r(J,"top",W),r(J,"left",W),r(J,"border-bottom-width",1+M),J[m]="▲",f(N),r(N,"bottom",W),r(N,"left",W),r(N,"border-top-width",1+M),N[m]="▼",Z.$24b=J,Z.$25b=N,Z.$18b=Z.scrollTop,Z.$22b=Z.scrollHeight,Z.$23b=Z.clientHeight,g(Z,J),g(Z,N),b.$42b(Z)};b.beforeShow&&b.beforeShow(v);var q=b._items;if(q&&(x&&x.preventDefault(),q.length)){b.rebuild(),G.appendToScreen(L),L.$26b=Q(L,".menu-item");var I=L.children[0];I.offsetHeight>D&&t(I);var S=u+(i?1:0),j=e+(i?1:0),X=function(g){for(var _=0,t=0,Z=0,D=b.$43b;Z<g.children.length;Z++){var h=g.children[Z];if(h.getAttribute("data-id")){var G=h.children[1],C=h.children[2],a=G.children;if(D){var Q=a[0];a.length>1&&(Q=a[1]),Q.offsetWidth>D&&(Q[m]="<marquee scrollamount='3'>"+Q[m]+"</marquee>",Q.children[0].style.verticalAlign="text-bottom",r(Q,z,D+M),r(Q,P,"inline-block"))}var s=G.offsetWidth,R=C.offsetWidth;s>_&&(_=s),R>t&&(t=R)}}for(Z=0;Z<g.children.length;Z++){var h=g.children[Z];if(h.getAttribute("data-id")){var G=h.children[1],C=h.children[2],k=G.children[0],B=G.children[1];!B&&k.style.width&&r(k,z,_+M),r(G,z,_+M),r(C,z,t+M)}}};X(I);var y=u+3+L.offsetHeight,n=e+3+L.offsetWidth;y>D?r(L,p,S-(y-D)+J+M):r(L,p,S+J+M),n>l?r(L,T,j-(n-l)+_+M):r(L,T,j+_+M);var U=b.$21b;U&&U.each(function(J){X(J),J.offsetHeight>D&&t(J)}),b.$9b&&f(C(),N?"touchstart":"mousedown",b.$9b,!0),b.afterShow&&b.afterShow(v),b.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=H:!1},getRelatedView:function(){return this.$12b},hide:function(){var k=this,a=k._view;a&&a.parentNode&&(X(a.parentNode,a),s(C(),N?"touchstart":"mousedown",k.$9b,!0),k.afterHide&&k.afterHide())},dispose:function(){var b=this,Z=b.$12b,R=b._view;R&&(R.parentNode&&X(R.parentNode,R),b.disableGlobalKey(),Z&&(N?(s(Z,"touchstart",b.$6b,!0),s(Z,"touchmove",b.$7b),s(Z,"touchend",b.$8b)):s(Z,"contextmenu",b.$27b)),b._view=b._items=b.$21b=b.$19b=b.$12b=b.beforeShow=b.afterShow=b.afterHide=b.$9b=b.$3b=b.$6b=b.$7b=b.$8b=b.$27b=H)},$46b:function(P,M,e,Y,v){var s=u.initContext(P);u.translateAndScale(s,0,0,1),s.clearRect(0,0,e,Y),G.drawStretchImage(s,G.getImage(M),"fill",0,0,e,Y,v,this),s.restore()},$47b:function(){var c,z,Y,K=this,w=K._view;if(K.isShowing()){var L=Q(w,".check-prefix");for(Y=0;Y<L.length;Y++){var P=L[Y];c=P.clientWidth,z=P.clientHeight,P.$48b=c,P.$49b=z,u.setCanvas(P,c,z)}var s=Q(w,".radio-prefix");for(Y=0;Y<s.length;Y++){var y=s[Y];c=y.clientWidth,z=y.clientHeight,y.$48b=c,y.$49b=z,u.setCanvas(y,c,z)}var X=Q(w,".contextmenu-item-icon");for(Y=0;Y<X.length;Y++){var m=X[Y];c=m.clientWidth,z=m.clientHeight,m.$48b=c,m.$49b=z,u.setCanvas(m,c,z)}}},validateImpl:function(){var p,c,E,u=this,C=u._view;if(u.isShowing()){var D=Q(C,".check-prefix");for(E=0;E<D.length;E++){var I=D[E];p=I.$48b,c=I.$49b,p&&c&&u.$46b(I,G.contextMenuCheckIcon,p,c)}var X=Q(C,".radio-prefix");for(E=0;E<X.length;E++){var Y=X[E];p=Y.$48b,c=Y.$49b,p&&c&&u.$46b(Y,G.contextMenuRadioIcon,p,c)}var a=Q(C,".contextmenu-item-icon");for(E=0;E<a.length;E++){var h=a[E];p=h.$48b,c=h.$49b,p&&c&&u.$46b(h,G.getImage(h.$50b),p,c,h._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);