!function(h,X,O){"use strict";var D="px",b="0",M="innerHTML",V="className",o=ht.Default,J=ht.Color,F=ht.Node,W="position",d="top",n="left",E=o.animate,i=o.getInternal(),Z="width",b="0",e="none",U="max-height",B="font",k="background",R="border-box",T="user-select",f="box-sizing",S="overflow",l=o.isTouchable,i=o.getInternal(),p=J.titleIconBackground,z=o.scrollBarInteractiveSize,A=/msie 9/.test(h.navigator?h.navigator.userAgent.toLowerCase():""),x=null,m=function(){return document},$=function(A){return m().createElement(A)},u=function(){return $("div")},w=function(){var o=u(),O=o.style;return O.msTouchAction=e,O.cursor="default",l&&O.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",x),O.position="absolute",O.left=b,O.top=b,o},C=function(){return $("canvas")},Y=function(){return document.body},L=function(O,W,$){O.style.setProperty(W,$,x)},r=function(g,X){g.style.removeProperty(X)},j=function(t,X,p){o.def(ht.widget[t],X,p)},v=function(I,d){I.appendChild(d)},_=function(v,U){v.removeChild(U)},I=o.eventListenerOptionsFalse,t=(o.eventListenerOptionsTrue,function(H,X,c,O){H.addEventListener(X,c,O?I:I)});i.addMethod(o,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:p,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:p}]},paletteTitleLabelColor:o.labelSelectColor,paletteTitleLabelFont:o.labelFont,paletteContentLabelFont:o.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:o.widgetTitleHeight,paletteTitleBackground:J.titleBackground,paletteTitleHoverBackground:J.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:O,paletteItemHoverBorderColor:J.highlight,paletteItemSelectBackground:J.highlight},!0);var N=".palette-item:hover{border: 1px solid "+o.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+o.paletteTitleHoverBackground+" !important}",c=document.createElement("style");l||(c.styleSheet?c.styleSheet.cssText=N:c.appendChild(m().createTextNode(N))),m().getElementsByTagName("head")[0].appendChild(c);var K=function(U){var p=this;p.$22h=U,p.addListeners()};o.def(K,X,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var h=this;h.$36h&&Y().removeChild(h.$36h),h.$23h=h.$24h=h.$25h=h.$35h=h.$36h=x},handle_touchstart:function(s){for(var B,T=this,L=T.$22h,C=s.target,e=L.sm(),r=L.dm(),j="palette-header",U="palette-header-tool",E="palette-item",l=!1,q=!1,J=!1;C&&(C[V]||"").indexOf(j)<0&&(C[V]||"").indexOf(E)<0;)C=C.parentNode;if(C&&C[V].indexOf(U)>=0?l=!0:C&&C[V].indexOf(j)>=0?J=!0:C&&C[V].indexOf(E)>=0&&(q=!0),o.isLeftButton(s))if(T.$27h(s))T.$24h=o.getClientPoint(s),T.$25h=L.ty();else if(l){o.preventDefault(s),B=C.parentNode.$11h;var Q=r.getDataById(B),y=Q.s("tools")[C.toolIndex];y.action&&y.action.call(L)}else if(J){o.preventDefault(s),B=C.$11h;var Q=r.getDataById(B);Q.isExpanded()?Q.setExpanded(!1):Q.setExpanded(!0)}else if(q){B=C.$11h;var N=r.getDataById(B);e.ss(N),L.handleDragAndDrop&&(o.preventDefault(s),N.s("draggable")&&(L.handleDragAndDrop(s,"prepare"),T.$35h=0)),N.s("draggable")||(o.preventDefault(s),T.$24h=o.getClientPoint(s),T.$25h=L.ty())}else o.preventDefault(s),T.$24h=o.getClientPoint(s),T.$25h=L.ty();else T.$26h(s)},handle_mousedown:function(d){this.handle_touchstart(d)},handle_mousewheel:function($){this.handleScroll($,$.wheelDelta/40,$.wheelDelta!==$.wheelDeltaX)},handle_DOMMouseScroll:function(D){this.handleScroll(D,-D.detail,1)},handleScroll:function(x,t,B){var n=this.$22h;o.preventDefault(x),B&&n._41o()&&n.ty(n.ty()+20*t)},handle_mouseup:function(_){this.handle_touchend(_)},handle_touchend:function(Z){var v=this;v.$37h(Z),v.$26h(Z)},handleWindowMouseUp:function(b){this.handleWindowTouchEnd(b)},handleWindowTouchEnd:function(I){var O=this;O.$37h(I),O.$26h(I)},$37h:function(p){var I=this,P=I.$22h;2===I.$35h&&(I.$35h=3,P.handleDragAndDrop(p,"end"))},handleWindowMouseMove:function(L){this.handleWindowTouchMove(L)},handleWindowTouchMove:function(_){var J=this,h=J.$22h,E=J.$23h,v=J.$24h,C=J.$25h,N=o.getClientPoint(_),I=h._29I,K=J.$36h;if(1===J.$35h||2===J.$35h){if(J.$35h=2,h.handleDragAndDrop(_,"between"),l){var f=_.touches[0];_=f?f:_.changedTouches[0]}K.style.left=_.pageX-parseInt(K.width)/2+D,K.style.top=_.pageY-parseInt(K.height)/2+D}else"p"===E?h.ty(C+N.y-v.y):"v"===E&&h.ty(C+(v.y-N.y)/I.height*h._59I)},handle_mousemove:function(G){this.handle_touchmove(G)},handle_touchmove:function(H){if(!o.isDragging()&&o.isLeftButton(H)){var P=this,F=P.$22h,x=P.$27h(H);if(P.$24h){if(!P.$23h){if(o.getDistance(o.getClientPoint(H),P.$24h)<2)return;P.$23h=x?"v":"p",o.startDragging(P)}}else if(x)F._43o();else if(0===P.$35h){if(P.$35h=1,F.handleDragAndDrop(H,"begin"),l){var w=H.touches[0];H=w?w:H.changedTouches[0]}var W=P.$36h=new Image,T=F.$10h[F.sm().ld().getId()].querySelector(".image-box"),r=parseInt(T.style.width),Z=parseInt(T.style.height);W.draggable=!1,W.src=T.toDataURL(),W.width=r,W.height=Z,W.style.position="absolute",W.style.left=H.pageX-r/2+D,W.style.top=H.pageY-Z/2+D,Y().appendChild(W),o.startDragging(P)}}},$27h:function(n){var p=this.$22h,T=p.getView(),B=T.getBoundingClientRect(),U=p._29I,R=n.clientX-B.left+T.scrollLeft;return p._41o()&&U.x+U.width-R<z}}),ht.widget.Palette=function(_){var g=this,F=g._view=i.createView(null,g);g.$9h={},g.$10h={},g.$4h={},g._29I={x:0,y:0,width:0,height:0},g._59I=0,g.dm(_?_:new ht.DataModel),F[V]="ht-widget-palette",g.$29h=new K(g),L(F,k,o.paletteContentBackground),L(F,S,"auto"),L(F,f,R),L(F,"-moz-"+f,R),L(F,"-webkit-"+T,e),L(F,"-moz-"+T,e),L(F,"-ms-"+T,e),L(F,T,e),L(F,"position","absolute"),L(F,"overflow","hidden"),v(F,g._79O=w()),t(F,"dragstart",function(H){H.dataTransfer&&(H.dataTransfer.setData("Text","nodeid:"+H.target.$11h),H.dataTransfer.effectAllowed="all",g.$29h.$26h())})},j("Palette",X,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:o.autoHideScrollBar,_scrollBarSize:o.scrollBarSize,_scrollBarColor:o.scrollBarColor,getViewRect:function(){return this._29I},ty:function(t){return t==x?this.getTranslateY():(this.setTranslateY(t),void 0)},setTranslateY:function(C){if(this.$32h==x){var d=this,n=d.$33h(C),X=d.$30h;d.$30h=n,d.fp("translateY",X,n)}},getTranslateY:function(){return this.$30h},setLayout:function(D){var f,l,u=this,d=u._layout;u._layout=D,"smallicons"===D?f=l=20:"iconsonly"===D?f=l=50:(f=70,l=50),u.setItemImageWidth(f),u.setItemImageHeight(l),u.setItemImagePadding(4),u.fp("layout",d,D)},getDataAt:function(R){for(var A=R.target;A&&A.$11h==x;)A=A.parentNode;return A&&A.$11h!=x?this.getDataModel().getDataById(A.$11h):void 0},$20h:function(){var g=16;return l&&(g*=1.2),g},$19h:function(){return o.paletteTitleHeight},$18h:function(){var v=o.paletteSeparatorWidth,U=o.paletteTitleBackground,k=o.paletteSeparatorColor||o.brighter(U);return v+D+" solid "+k},$17h:function(C){L(C,"cursor","pointer"),L(C,"display","inline-block"),L(C,"margin-right",(l?8:4)+D),L(C,"vertical-align",d)},$1h:function(N){var y=this,K=u(),T=u(),_=$("span");K[V]="palette-header",L(K,W,"relative"),L(K,k,o.paletteTitleBackground),L(K,"color",o.paletteTitleLabelColor),L(K,d,b),L(K,f,R),L(K,"-moz-"+f,R),L(K,"padding","0 5px 0 0"),L(K,"border-top",y.$18h()),L(K,Z,"100%"),L(K,"cursor","pointer"),L(K,"white-space","nowrap"),L(K,S,"hidden"),L(K,B,o.paletteTitleLabelFont),L(K,"line-height",y.$19h()+D),K.$11h=N.getId();var r=C(),n=y.$19h(),j=y.$20h();y.$17h(r),i.setCanvas(r,j,n),v(K,r);var H=N.s("tools");if(H)for(var O=0;O<H.length;O++){var J=C();y.$17h(J),i.setCanvas(J,j,n),J[V]="palette-header-tool palette-header-tool"+N.getId()+"-"+O,J.style.position="absolute",J.style.right=(j+10)*O+"px",J.toolIndex=O,v(K,J)}return r[V]="palette-toggle-icon-"+N.getId(),T[V]="palette-content",L(T,"max-height",0+D),L(T,B,o.paletteContentLabelFont),L(T,S,"hidden"),T.$11h=N.getId(),y.$9h[N.getId()]=T,_[M]=N.getName(),L(_,B,o.paletteTitleLabelFont),v(K,r),v(K,_),[K,T]},$2h:function(h){var l=this,q=l._layout,X=A&&h.s("draggable")?$("a"):u(),O=C(),F=u(),s=h.getName()||"",_=h.s("title")||h.getToolTip()||s,N=l._itemMargin;O[V]="image-box";var w=l.getItemImageWidth(),I=l.getItemImageHeight();return i.setCanvas(O,w,I),v(X,O),F[M]=s,F[V]="label-box","iconsonly"!==q&&v(X,F),X[V]="palette-item",L(X,"vertical-align",d),L(X,"cursor","pointer"),L(X,"border-radius",5+D),L(X,"border","1px solid transparent"),L(X,"text-align","center"),L(X,"display","inline-block"),L(X,"margin-left",N+D),L(X,"margin-top",N+D),L(X,"color",o.paletteContentLabelColor),"smallicons"===q?(L(O,"vertical-align","middle"),L(X,"margin-left",2+D),L(X,"margin-top",2+D),L(X,"padding",2+D),L(X,"text-align",n),L(F,"display","inline-block"),L(F,"min-width",l.$21h+l._itemMargin+D)):"largeicons"===q&&(L(F,"max-width",w+D),L(F,"overflow","hidden")),X.$11h=h.getId(),_&&(X.title=_),h.s("draggable")&&!l.handleDragAndDrop&&(A?(X.href="#",L(X,"text-decoration",e)):X.draggable="true"),X},$16h:function(t,T,A,d){var k=i.initContext(t);i.translateAndScale(k,0,0,1),k.clearRect(0,0,A,A);var I=(A-d)/2;o.drawStretchImage(k,o.getImage(T),"fill",0,I,d,d),k.restore()},$15h:function(B){var N=this,H=B.getId(),q=N._view.querySelector(".palette-toggle-icon-"+H),j=B.isExpanded()?o.paletteCollapseIcon:o.paletteExpandIcon;if(q&&j){var r=N.$19h(),z=N.$20h();N.$16h(q,j,r,z)}},_drawToolsIcon:function(_){var q=this,P=_.s("tools");if(P)for(var I=0;I<P.length;I++){var k=q._view.querySelector(".palette-header-tool"+_.getId()+"-"+I),h=P[I].icon,C=q.$19h(),G=q.$20h();q.$16h(k,h,C,G)}},$14h:function(x){var C=this,c=x.getId(),y=C.$10h[c].querySelector(".image-box"),Z=x.getImage(),D=x.s("image.stretch");if(y&&Z){var V=i.initContext(y),L=C.getItemImagePadding();L="smallicons"===C._layout?L/2:L;var W=C.getItemImageWidth()-2*L,U=C.getItemImageHeight()-2*L;i.translateAndScale(V,0,0,1),V.clearRect(0,0,W,U),o.drawStretchImage(V,o.getImage(Z),D,L,L,W,U,x,C),V.restore()}},validateImpl:function(){var G,d,t,I=this,Z=I.$9h,B=I._layout,Y=I.$10h,P=I.$4h,q=I._view,p=I.dm();if(I.$13h&&(delete I.$13h,P={},p.each(function(Z){P[Z.getId()]=Z})),"smallicons"===B)for(var m in P){var T=P[m];if(T instanceof F){var s=T.getName()||"",N=o.getTextSize(o.paletteContentLabelFont,s).width;I.$21h!=x&&I.$21h>N||(I.$21h=N)}}for(var m in P){t=P[m];var C,u;if(p.contains(t)){if(t instanceof ht.Group){var H,h=I.$1h(t),A=Y[t.getId()];A&&(H=A.nextSibling,_(q,H),_(q,A)),d=p.getSiblings(t).indexOf(t);var g=q.children[2*d]||I._79O;g&&g.parentNode?(q.insertBefore(h[0],g),q.insertBefore(H||h[1],g)):(q.appendChild(h[0]),q.appendChild(H||h[1])),Y[t.getId()]=h[0],G=Z[t.getId()]=H||h[1],u=t.$12h;var w=t.s("promptText");u||(t.$12h=$("div"),t.$12h[M]=w||"",u=t.$12h),0===t.getChildren().size()?G.contains(u)||v(G,u):G.contains(u)&&_(G,u)}else if(C=t.getParent()){var S=I.$2h(t),k=Y[t.getId()];G=Z[C.getId()],k&&_(k.parentNode,k),d=p.getSiblings(t).indexOf(t);var R=G.children[d];R?G.insertBefore(S,R):v(G,S),Y[t.getId()]=S,I.$14h(t)}}else{var n=Y[t.getId()],W=n.parentNode;if(t instanceof ht.Group){var c=n.nextSibling;_(q,n),_(q,c),delete Z[t.getId()]}else _(W,n),0===W.children.length&&(C=p.getDataById(W.$11h),C&&(u=C.$12h,u&&!W.contains(u)&&v(W,u)));delete Y[t.getId()]}}I.$4h={};var e=function(){var V=I._59I,S=0;I.$32h!=x&&(clearInterval(I.$32h),S=0,delete I.$32h),I.$32h=setInterval(function(){I.$31h(),V===I._59I?(S++,S>=2&&(clearInterval(I.$32h),delete I.$32h)):(S=0,V=I._59I)},30)};for(var i in Z)if(G=Z[i],t=p.getDataById(Z[i].$11h),I.$15h(t),I._drawToolsIcon(t),t.isExpanded()){if(G.style.maxHeight===0+D){var V=G.scrollHeight+I._itemMargin+D;E(G).duration(200).set(U,V).set("padding-bottom",I._itemMargin+D).end(function(){return function(){e()}}(V))}else G.style.maxHeight=G.scrollHeight+D;G.style.paddingBottom=I._itemMargin+D}else G.style.maxHeight!==0+D&&E(G).duration(200).set(U,b).set("padding-bottom",b).end(function(){return function(){e()}}(G));I.$28h(),I.$31h()},$31h:function(){for(var c=this,Q=c._view,X=0,i=Q.children,J=0;J<i.length;J++){var U=i[J];U.className&&U.className.indexOf("palette-")>=0&&(X+=U.offsetHeight)}c._59I=X,c.$30h=c.$33h(c.ty());var E=c.ty();Q.scrollTop=-E,c._29I={x:0,y:-E,width:Q.clientWidth,height:Q.clientHeight},L(c._79O,d,-E+D),c._93I()},$33h:function(g){var L=this,D=L._29I.height-L._59I;return D>g&&(g=D),g>0?0:Math.round(g)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(A){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(A.property)<0&&this.redraw(),"translateY"===A.property&&(this.iv(),this._43o())},findDataByName:function(L){for(var u=this.dm().getDatas(),H=0;H<u.size();H++){var j=u.get(H);if(j.getName()===L)return j}},setDataModel:function(G){var b=this,F=b._dataModel,V=b._selectionModel;F!==G&&(F&&(F.umm(b.$6h,b),F.umd(b.$8h,b),F.umh(b.$7h,b),V||F.sm().ums(b.$28h,b)),b._dataModel=G,G.mm(b.$6h,b),G.md(b.$8h,b),G.mh(b.$7h,b),V?V._21I(G):G.sm().ms(b.$28h,b),b.sm().setSelectionMode("single"),b.fp("dataModel",F,G))},$6h:function(y){var Z=this,i=Z._view,b=y.data,t=Z.$4h;"add"===y.kind?t[b.getId()]=b:"remove"===y.kind?t[b.getId()]=b:"clear"===y.kind&&(Z.$10h={},Z.$9h={},Z.$4h={},i[M]=""),Z.iv()},$7h:function(E){var O=this,m=E.data;O.$4h[m.getId()]=m,O.iv()},$8h:function(p){var m=this,f=p.data,d=p.property;"expanded"===d?m.iv():(m.$4h[f.getId()]=f,m.iv())},$28h:function(){var g,$=this,j=$.sm(),z="palette-item",H=j.ld();this.dm().each(function(v){g=$.$10h[v.getId()],g&&g[V].indexOf(z)>=0&&(v===H?L(g,k,o.paletteItemSelectBackground):r(g,k))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);