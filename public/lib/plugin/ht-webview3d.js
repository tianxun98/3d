!function(Q){"use strict";function _(i){var V,Y,R,Z,l,B,X,h=[],_=0;V=d.createDiv(),V.style.overflow="hidden";var r=i.getView();r.insertBefore(V,i.getCanvas()),Y=F.Default.createDiv(),Y.style.WebkitTransformStyle="preserve-3d",Y.style.MozTransformStyle="preserve-3d",Y.style.transformStyle="preserve-3d",V.appendChild(Y),[{event:"mousedown",style:"none"},{event:"mouseup",style:"auto"},{event:"touchstart",style:"none"},{event:"touchend",style:"auto"}].forEach(function(X){var H=X.style;r.addEventListener(X.event,function(){V.style.pointerEvents=H})}),this.updateWebView=function(){var O=i.getCanvas(),u=1*O.style.width.slice(0,-2),o=1*O.style.height.slice(0,-2);(h[0]!==u||h[1]!==o)&&(h[0]=u,h[1]=o,V.style.width=u+"px",V.style.height=o+"px",Y.style.width=u+"px",Y.style.height=o+"px");var n=i._projectMatrix[5]*h[1]/2;n!==R&&(R=n,V.style.WebkitPerspective=R+"px",V.style.MozPerspective=R+"px",V.style.perspective=R+"px"),B="translateZ("+R+"px)"+T(i._viewMatrix);var k=B+"translate("+h[0]/2+"px,"+h[1]/2+"px)";Z===k||l||(Y.style.WebkitTransform=k,Y.style.MozTransform=k,Y.style.transform=k,Z=k),_++,X=!1,i.dm().each(function(y){y.isWebView&&p(y)});for(var b,f=Y.children,g=[],U=0,D=f.length;D>U;U++)b=f[U],b._isHtWebView&&b._renderCookie!==_&&g.push(b);g.length&&g.forEach(function(L){Y.removeChild(L)})};var m=new Array(16),p=function(G){var v=G.getAttach();if(v){v.parentElement!==Y&&Y.appendChild(v),v._renderCookie=_,X=!0;var i=G.getFinalScale3d(),T=G._prefrenceSize;T&&T[0]?T[1]||(T[1]=T[0]/i[0]*i[1]):T=[i[0],i[1]],v.style.width=T[0]+"px",v.style.height=T[1]+"px";var S=1/T[0],e=1/T[1],t=1,w=G.mat;m[0]=w[0]*S,m[1]=w[1]*S,m[2]=w[2]*S,m[3]=w[3]*S,m[4]=w[4]*e,m[5]=w[5]*e,m[6]=w[6]*e,m[7]=w[7]*e,m[8]=w[8]*t,m[9]=w[9]*t,m[10]=w[10]*t,m[11]=w[11]*t,m[12]=w[12],m[13]=w[13],m[14]=w[14],m[15]=w[15];var D=g(m,l?"translate("+h[0]/2+"px,"+h[1]/2+"px)"+B:""),q=v.$a2;q!==D&&(v.$a2=D,v.style.WebkitTransform=D,v.style.MozTransform=D,v.style.transform=D)}}}function f(i){return Math.abs(i)<1e-10?0:i}function T(i){var J=i;return"matrix3d("+f(J[0])+","+f(-J[1])+","+f(J[2])+","+f(J[3])+","+f(J[4])+","+f(-J[5])+","+f(J[6])+","+f(J[7])+","+f(J[8])+","+f(-J[9])+","+f(J[10])+","+f(J[11])+","+f(J[12])+","+f(-J[13])+","+f(J[14])+","+f(J[15])+")"}function g(n,s){var T=n,o="matrix3d("+f(T[0])+","+f(T[1])+","+f(T[2])+","+f(T[3])+","+f(-T[4])+","+f(-T[5])+","+f(-T[6])+","+f(-T[7])+","+f(T[8])+","+f(T[9])+","+f(T[10])+","+f(T[11])+","+f(T[12])+","+f(T[13])+","+f(T[14])+","+f(T[15])+")";return"translate(-50%,-50%)"+(s||"")+o}var R="ht",F=Q[R],d=F.Default,D=d.getInternal(),W=D.superCall,E=F.graph3d.Graph3dView,L=E.prototype.validateImpl;E.prototype.validateImpl=function(){L.call(this);var k=this._webViewRenderer;k||(k=this._webViewRenderer=new _(this)),k.updateWebView()};var B=F.WebView3d=function(){var d=this;W(B,d),d.s({shape3d:"billboard","shape3d.reverse.flip":!0})},I=[1,1,1,1],K=[0,0,0,0];d.def(R+"."+"WebView3d",F.Node,{ms_ac:["attach"],isWebView:!0,attachDOM:function(V,Z,L){if(!V)return this.detachDOM();if("string"==typeof V){var $=document.createElement("iframe");$.src=V,V=$}var w=V.style;w.position="absolute",w.border=0,w.outline=0,w.padding=0,w.margin=0,V._isHtWebView=!0,this.setAttach(V),this._prefrenceSize=[Z,L],this.s("shape3d.blend",K)},detachDOM:function(){this.setAttach(null),this.s("shape3d.blend",this.getBgColor())},setBgColor:function(N){this.a("defaultBgColor",N),this.getAttach()||this.s("shape3d.blend",N)},getBgColor:function(){return this.a("defaultBgColor")||I}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);