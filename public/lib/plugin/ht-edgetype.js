!function(R){"use strict";var P="ht",Z=R[P],l=Math,e=l.max,a=l.min,V=l.abs,q=l.atan2,O=(l.cos,l.sin,l.ceil),r=Z.Default,d=r.getInternal(),U=Z.List,t=d.Mat,o=d.getNodeRect,j=d.intersectionLineRect,s=r.getDistance,B=r.setEdgeType,D="left",I="right",p="top",E="bottom",F="edge.type",k="edge.gap",i="edge.center",z="edge.extend",m=function(m,X){return o(m,X).width},n=function(z,P){return o(z,P).height},g=function(P,n){return d.getEdgeAgentPosition(P,n._40I,n.s("edge.source.position"),n.s("edge.source.offset.x"),n.s("edge.source.offset.y"),n.s("edge.source.anchor.x"),n.s("edge.source.anchor.y"))},b=function(a,D){return d.getEdgeAgentPosition(a,D._41I,D.s("edge.target.position"),D.s("edge.target.offset.x"),D.s("edge.target.offset.y"),D.s("edge.target.anchor.x"),D.s("edge.target.anchor.y"))},u=function(g,R){var L=g.s(F),y=g.getEdgeGroup();if(y){var K=0;if(y.eachSiblingEdge(function(U){R.isVisible(U)&&U.s(F)==L&&K++}),K>1)return g.s(k)*(K-1)/2}return 0},Y=function(V,W){var Q=V.s(F),c=V.isLooped();if(!V.getEdgeGroup())return c?V.s(k):0;var D,S=0,t=0,d=0;return V.getEdgeGroup().getSiblings().each(function(e){e.each(function(w){if(w._40I===V._40I&&w.s(F)==Q&&W.isVisible(w)){var N=w.s(k);D?(t+=d/2+N/2,d=N):(D=w,d=N),w===V&&(S=t)}})}),c?t-S+d:S-t/2},H=function(u,f){var E=f.s("edge.corner.radius");return r.toRoundedCorner(u,E)};d.addMethod(Z.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),B("boundary",function(M,v,K,F){F||(v=-v);var G,a=g(K,M),k=b(K,M),n=o(K,M._40I),h=o(K,M._41I),l=new t(q(k.y-a.y,k.x-a.x)),c=s(a,k),f=a.x,$=a.y;return G=l.tf(0,v),a={x:G.x+f,y:G.y+$},G=l.tf(c,v),k={x:G.x+f,y:G.y+$},G=j(a,k,n),G&&(a={x:G[0],y:G[1]}),G=j(a,k,h),G&&(k={x:G[0],y:G[1]}),{points:new U([a,k])}}),B("ripple",function(R,X,S,n){n||(X=-X);var e=g(S,R),T=b(S,R),v=s(e,T),$=a(R.s("edge.offset"),v/2),_=R.s("edge.ripple.size"),Z=R.s("edge.ripple.length"),F=R.s("edge.ripple.both"),H=R.s(i),w=R.s("edge.ripple.elevation"),G=new U,j=R.s("edge.ripple.straight")?null:new U,V=new t(q(T.y-e.y,T.x-e.x));n||(w=-w),v-=2*$,Z>0&&(_=O(v/Z));var k=v/_;j&&j.add(1);for(var A=0;_>A;A++)j&&j.add(3),0===A?G.add({x:$+k*A,y:H?0:X}):G.add({x:$+k*A,y:X}),G.add({x:$+k*A+k/2,y:w+X}),F&&(w=-w);for(G.add({x:$+v,y:H?0:X}),A=0;A<G.size();A++){var D=V.tf(G.get(A));D.x+=e.x,D.y+=e.y,G.set(A,D)}return{points:G,segments:j}}),B("h.v",function(j,X,B){X=Y(j,B);var I=new U,s=j.s(i),e=g(B,j),_=e.x,h=e.y,F=b(B,j),k=F.x,$=F.y,f=0,l=0,c=k-_,J=$-h;return s||(f=m(B,j._40I)/2,l=n(B,j._41I)/2),c>=0&&0>=J?(I.add({x:_+f,y:h+X}),I.add({x:k+X,y:h+X}),I.add({x:k+X,y:$+l})):0>=c&&J>=0?(I.add({x:_-f,y:h+X}),I.add({x:k+X,y:h+X}),I.add({x:k+X,y:$-l})):c>=0&&J>=0?(I.add({x:_+f,y:h+X}),I.add({x:k-X,y:h+X}),I.add({x:k-X,y:$-l})):(I.add({x:_-f,y:h+X}),I.add({x:k-X,y:h+X}),I.add({x:k-X,y:$+l})),H(I,j)}),B("v.h",function(J,O,q){O=Y(J,q);var E=new U,p=J.s(i),y=g(q,J),I=y.x,k=y.y,N=b(q,J),D=N.x,r=N.y,P=0,C=0,w=D-I,$=r-k;return p||(P=m(q,J._41I)/2,C=n(q,J._40I)/2),w>=0&&0>=$?(E.add({x:I+O,y:k-C}),E.add({x:I+O,y:r+O}),E.add({x:D-P,y:r+O})):0>=w&&$>=0?(E.add({x:I+O,y:k+C}),E.add({x:I+O,y:r+O}),E.add({x:D+P,y:r+O})):w>=0&&$>=0?(E.add({x:I-O,y:k+C}),E.add({x:I-O,y:r+O}),E.add({x:D-P,y:r+O})):(E.add({x:I-O,y:k-C}),E.add({x:I-O,y:r+O}),E.add({x:D+P,y:r+O})),H(E,J)}),B("ortho",function(s,P,o){var R=new U,E=s.s(i),z=s.s("edge.ortho"),p=s._40I,c=s._41I,h=g(o,s),l=h.x,X=h.y,t=b(o,s),k=t.x,$=t.y,y=k-l,L=$-X,F=E?0:m(o,p)/2,J=E?0:n(o,p)/2,v=E?0:m(o,c)/2,I=E?0:n(o,c)/2,_=(y-(F+v)*(y>0?1:-1))*z,C=(L-(J+I)*(L>0?1:-1))*z;return V(y)<V(L)?y>=0&&0>=L?(R.add({x:l+P,y:X-J}),R.add({x:l+P,y:X+C+P-J}),R.add({x:k+P,y:X+C+P-J}),R.add({x:k+P,y:$+I})):0>=y&&L>=0?(R.add({x:l+P,y:X+J}),R.add({x:l+P,y:X+C+P+J}),R.add({x:k+P,y:X+C+P+J}),R.add({x:k+P,y:$-I})):y>=0&&L>=0?(R.add({x:l+P,y:X+J}),R.add({x:l+P,y:X+C-P+J}),R.add({x:k+P,y:X+C-P+J}),R.add({x:k+P,y:$-I})):(R.add({x:l+P,y:X-J}),R.add({x:l+P,y:X+C-P-J}),R.add({x:k+P,y:X+C-P-J}),R.add({x:k+P,y:$+I})):y>=0&&0>=L?(R.add({x:l+F,y:X+P}),R.add({x:l+_+P+F,y:X+P}),R.add({x:l+_+P+F,y:$+P}),R.add({x:k-v,y:$+P})):0>=y&&L>=0?(R.add({x:l-F,y:X+P}),R.add({x:l+_+P-F,y:X+P}),R.add({x:l+_+P-F,y:$+P}),R.add({x:k+v,y:$+P})):y>=0&&L>=0?(R.add({x:l+F,y:X+P}),R.add({x:l+_-P+F,y:X+P}),R.add({x:l+_-P+F,y:$+P}),R.add({x:k-v,y:$+P})):(R.add({x:l-F,y:X+P}),R.add({x:l+_-P-F,y:X+P}),R.add({x:l+_-P-F,y:$+P}),R.add({x:k+v,y:$+P})),H(R,s)}),B("flex",function(e,J,s){var T=new U,X=e.s("edge.flex")+u(e,s),h=e.s(i),L=e._40I,Q=e._41I,G=g(s,e),q=G.x,f=G.y,o=b(s,e),x=o.x,K=o.y,$=x-q,B=K-f,S=h?0:m(s,L)/2,M=h?0:n(s,L)/2,t=h?0:m(s,Q)/2,r=h?0:n(s,Q)/2,j=$>0?X:-X,p=B>0?X:-X;return V($)<V(B)?$>=0&&0>=B?(T.add({x:q+J,y:f-M}),T.add({x:q+J,y:f+p+J-M}),T.add({x:x+J,y:K-p+J+r}),T.add({x:x+J,y:K+r})):0>=$&&B>=0?(T.add({x:q+J,y:f+M}),T.add({x:q+J,y:f+p+J+M}),T.add({x:x+J,y:K-p+J-r}),T.add({x:x+J,y:K-r})):$>=0&&B>=0?(T.add({x:q+J,y:f+M}),T.add({x:q+J,y:f+p-J+M}),T.add({x:x+J,y:K-p-J-r}),T.add({x:x+J,y:K-r})):(T.add({x:q+J,y:f-M}),T.add({x:q+J,y:f+p-J-M}),T.add({x:x+J,y:K-p-J+r}),T.add({x:x+J,y:K+r})):$>=0&&0>=B?(T.add({x:q+S,y:f+J}),T.add({x:q+j+J+S,y:f+J}),T.add({x:x-j+J-t,y:K+J}),T.add({x:x-t,y:K+J})):0>=$&&B>=0?(T.add({x:q-S,y:f+J}),T.add({x:q+j+J-S,y:f+J}),T.add({x:x-j+J+t,y:K+J}),T.add({x:x+t,y:K+J})):$>=0&&B>=0?(T.add({x:q+S,y:f+J}),T.add({x:q+j-J+S,y:f+J}),T.add({x:x-j-J-t,y:K+J}),T.add({x:x-t,y:K+J})):(T.add({x:q-S,y:f+J}),T.add({x:q+j-J-S,y:f+J}),T.add({x:x-j-J+t,y:K+J}),T.add({x:x+t,y:K+J})),H(T,e)}),B("extend.east",function(v,Q,a){var Y=new U,t=v.s(z)+u(v,a),p=v.s(i),F=g(a,v),S=F.x+(p?0:m(a,v._40I)/2),C=F.y,V=b(a,v),c=V.x+(p?0:m(a,v._41I)/2),o=V.y,K=e(S,c)+t;return C>o?(Y.add({x:S,y:C+Q}),Y.add({x:K+Q,y:C+Q}),Y.add({x:K+Q,y:o-Q}),Y.add({x:c,y:o-Q})):(Y.add({x:S,y:C-Q}),Y.add({x:K+Q,y:C-Q}),Y.add({x:K+Q,y:o+Q}),Y.add({x:c,y:o+Q})),H(Y,v)}),B("extend.west",function(W,r,G){var k=new U,y=W.s(z)+u(W,G),X=W.s(i),l=g(G,W),f=l.x-(X?0:m(G,W._40I)/2),c=l.y,A=b(G,W),P=A.x-(X?0:m(G,W._41I)/2),q=A.y,v=a(f,P)-y;return c>q?(k.add({x:f,y:c+r}),k.add({x:v-r,y:c+r}),k.add({x:v-r,y:q-r}),k.add({x:P,y:q-r})):(k.add({x:f,y:c-r}),k.add({x:v-r,y:c-r}),k.add({x:v-r,y:q+r}),k.add({x:P,y:q+r})),H(k,W)}),B("extend.north",function(Y,M,Z){var s=new U,I=Y.s(z)+u(Y,Z),k=Y.s(i),J=g(Z,Y),P=J.x,S=J.y-(k?0:n(Z,Y._40I)/2),W=b(Z,Y),e=W.x,T=W.y-(k?0:n(Z,Y._41I)/2),X=a(S,T)-I;return P>e?(s.add({y:S,x:P+M}),s.add({y:X-M,x:P+M}),s.add({y:X-M,x:e-M}),s.add({y:T,x:e-M})):(s.add({y:S,x:P-M}),s.add({y:X-M,x:P-M}),s.add({y:X-M,x:e+M}),s.add({y:T,x:e+M})),H(s,Y)}),B("extend.south",function(d,D,_){var V=new U,C=d.s(z)+u(d,_),x=d.s(i),s=g(_,d),P=s.x,L=s.y+(x?0:n(_,d._40I)/2),Q=b(_,d),k=Q.x,T=Q.y+(x?0:n(_,d._41I)/2),j=e(L,T)+C;return P>k?(V.add({y:L,x:P+D}),V.add({y:j+D,x:P+D}),V.add({y:j+D,x:k-D}),V.add({y:T,x:k-D})):(V.add({y:L,x:P-D}),V.add({y:j+D,x:P-D}),V.add({y:j+D,x:k+D}),V.add({y:T,x:k+D})),H(V,d)});var M=function(B,d,z,g,V){if(g.sort(function(B,h){var y=B.getSourceAgent()===d?B.getTargetAgent():B.getSourceAgent(),i=h.getSourceAgent()===d?h.getTargetAgent():h.getSourceAgent(),m=y.p(),W=i.p();if(z===D||z===I){if(m.y>W.y)return 1;if(m.y<W.y)return-1}else{if(m.x>W.x)return 1;if(m.x<W.x)return-1}return r.sortFunc(B.getId(),h.getId())}),V){for(var o,T,L,$=B.getSourceAgent(),C=B.getTargetAgent(),R=0;R<g.size();R++){var h=g.get(R);h.getSourceAgent()===$&&h.getTargetAgent()===C||h.getTargetAgent()===$&&h.getSourceAgent()===C?(T||(T=new U),T.add(h,0)):T?(L||(L=new U),L.add(h)):(o||(o=new U),o.add(h))}g.clear(),o&&g.addAll(o),T&&g.addAll(T),L&&g.addAll(L)}var c=g.indexOf(B),S=g.size(),p=B.s(k);return{side:z,index:c,size:S,offset:-p*(S-1)/2+p*c}},w=function(u,d,L,f,G){var C=d.s(F);return M(d,L,f,L.getAgentEdges().toList(function(k){return u.isVisible(k)&&k.s(F)===C}),G)},G=function(h,F){var C=h.getSourceAgent()===F?h.getTargetAgent():h.getSourceAgent(),l=F.p(),Q=C.p(),v=Q.x-l.x,J=Q.y-l.y;return v>0&&V(J)<=v?I:0>v&&V(J)<=-v?D:J>0&&V(v)<=J?E:p},f=function(y,x,X){var e=x.s(F),S=G(x,X);return M(x,X,S,X.getAgentEdges().toList(function(A){return y.isVisible(A)&&A.s(F)===e&&G(A,X)===S}))},L=function(T,X){var f=T.getSourceAgent()===X,_=f?T.getTargetAgent():T.getSourceAgent(),e=X.p(),K=_.p();return f?e.y>K.y?p:E:e.x<K.x?I:D},C=function(Q,r,G){var o=r.s(F),x=L(r,G);return M(r,G,x,G.getAgentEdges().toList(function(B){return Q.isVisible(B)&&B.s(F)===o&&L(B,G)===x}),x===I||x===E)},$=function(R,J){var a=R.getSourceAgent()===J,P=a?R.getTargetAgent():R.getSourceAgent(),z=J.p(),U=P.p();return a?z.x<U.x?I:D:z.y>U.y?p:E},S=function(V,s,m){var f=s.s(F),w=$(s,m);return M(s,m,w,m.getAgentEdges().toList(function(N){return V.isVisible(N)&&N.s(F)===f&&$(N,m)===w}),w===I||w===E)},J=function(C,y,P){var f=C.getSourceAgent(),s=C.getTargetAgent(),L=f.getId()>s.getId(),_=L?s:f,W=L?f:s,F=_.p(),$=W.p(),x=P(y,C,_),t=P(y,C,W),O=C.s(i),G=O?0:m(y,_)/2,e=O?0:m(y,W)/2,b=O?0:n(y,_)/2,X=O?0:n(y,W)/2,z=x.offset,j=t.offset,J=x.side,o=t.side,B=new U;return J===p?(B.add({x:F.x+z,y:F.y-b}),B.add({x:F.x+z,y:$.y+j}),o===D?B.add({x:$.x-e,y:$.y+j}):B.add({x:$.x+e,y:$.y+j})):J===E?(B.add({x:F.x+z,y:F.y+b}),B.add({x:F.x+z,y:$.y+j}),o===D?B.add({x:$.x-e,y:$.y+j}):B.add({x:$.x+e,y:$.y+j})):J===D?(B.add({x:F.x-G,y:F.y+z}),B.add({x:$.x+j,y:F.y+z}),o===E?B.add({x:$.x+j,y:$.y+X}):B.add({x:$.x+j,y:$.y-X})):J===I&&(B.add({x:F.x+G,y:F.y+z}),B.add({x:$.x+j,y:F.y+z}),o===E?B.add({x:$.x+j,y:$.y+X}):B.add({x:$.x+j,y:$.y-X})),L&&B.reverse(),H(B,C)};B("ortho2",function(A,C,k){var v,P,V=A.s(i),B=A.s("edge.ortho"),t=A.getSourceAgent(),x=A.getTargetAgent(),S=t.getId()>x.getId(),M=S?x:t,L=S?t:x,$=M.p(),G=L.p(),j=f(k,A,M),T=f(k,A,L),X=V?0:m(k,M)/2,R=V?0:n(k,M)/2,s=V?0:m(k,L)/2,W=V?0:n(k,L)/2,z=new U,y=j.offset,a=T.offset,g=j.side;return g===I?(v=G.y>$.y?-y:y,P=$.x+X+(G.x-s-$.x-X)*B,z.add({x:$.x+X,y:$.y+y}),z.add({x:P+v,y:$.y+y}),z.add({x:P+v,y:G.y+a}),z.add({x:G.x-s,y:G.y+a})):g===D?(v=G.y>$.y?-y:y,P=$.x-X-($.x-X-G.x-s)*B,z.add({x:$.x-X,y:$.y+y}),z.add({x:P-v,y:$.y+y}),z.add({x:P-v,y:G.y+a}),z.add({x:G.x+s,y:G.y+a})):g===E?(v=G.x>$.x?-y:y,P=$.y+R+(G.y-W-$.y-R)*B,z.add({x:$.x+y,y:$.y+R}),z.add({x:$.x+y,y:P+v}),z.add({x:G.x+a,y:P+v}),z.add({x:G.x+a,y:G.y-W})):g===p&&(v=G.x>$.x?-y:y,P=$.y-R-($.y-R-G.y-W)*B,z.add({x:$.x+y,y:$.y-R}),z.add({x:$.x+y,y:P-v}),z.add({x:G.x+a,y:P-v}),z.add({x:G.x+a,y:G.y+W})),S&&z.reverse(),H(z,A)},!0),B("flex2",function(g,q,L){var C,P=g.getSourceAgent(),e=g.getTargetAgent(),r=P.getId()>e.getId(),T=r?e:P,d=r?P:e,b=T.p(),w=d.p(),F=f(L,g,T),Y=f(L,g,d),J=g.s(i),h=g.s("edge.flex")+(F.size-1)/2*g.s(k),y=J?0:m(L,T)/2,s=J?0:n(L,T)/2,c=J?0:m(L,d)/2,V=J?0:n(L,d)/2,G=new U,$=F.offset,z=Y.offset,j=F.side;return j===I?(C=w.y>b.y?-$:$,G.add({x:b.x+y,y:b.y+$}),G.add({x:b.x+y+h+C,y:b.y+$}),G.add({x:w.x-c-h+C,y:w.y+z}),G.add({x:w.x-c,y:w.y+z})):j===D?(C=w.y>b.y?-$:$,G.add({x:b.x-y,y:b.y+$}),G.add({x:b.x-y-h-C,y:b.y+$}),G.add({x:w.x+c+h-C,y:w.y+z}),G.add({x:w.x+c,y:w.y+z})):j===E?(C=w.x>b.x?-$:$,G.add({x:b.x+$,y:b.y+s}),G.add({x:b.x+$,y:b.y+s+h+C}),G.add({x:w.x+z,y:w.y-V-h+C}),G.add({x:w.x+z,y:w.y-V})):j===p&&(C=w.x>b.x?-$:$,G.add({x:b.x+$,y:b.y-s}),G.add({x:b.x+$,y:b.y-s-h-C}),G.add({x:w.x+z,y:w.y+V+h-C}),G.add({x:w.x+z,y:w.y+V})),r&&G.reverse(),H(G,g)},!0),B("extend.north2",function(K,f,h){var m=K.getSourceAgent(),W=K.getTargetAgent(),G=m.getId()>W.getId(),J=G?W:m,B=G?m:W,t=J.p(),I=B.p(),d=w(h,K,J,p),r=w(h,K,B,p,!0),v=K.s(i),c=v?0:n(h,J)/2,q=v?0:n(h,B)/2,Q=d.offset,S=r.offset,E=K.s(z)+(d.size-1)/2*K.s(k),y=a(t.y-c,I.y-q)-E+(t.x<I.x?Q:-Q),o=new U;return o.add({x:t.x+Q,y:t.y-c}),o.add({x:t.x+Q,y:y}),o.add({x:I.x+S,y:y}),o.add({x:I.x+S,y:I.y-q}),G&&o.reverse(),H(o,K)},!0),B("extend.south2",function(h,V,r){var R=h.getSourceAgent(),Q=h.getTargetAgent(),C=R.getId()>Q.getId(),P=C?Q:R,X=C?R:Q,Y=P.p(),l=X.p(),T=w(r,h,P,E),$=w(r,h,X,E,!0),t=h.s(i),p=t?0:n(r,P)/2,G=t?0:n(r,X)/2,m=T.offset,a=$.offset,S=h.s(z)+(T.size-1)/2*h.s(k),c=e(Y.y+p,l.y+G)+S+(Y.x>l.x?m:-m),I=new U;return I.add({x:Y.x+m,y:Y.y+p}),I.add({x:Y.x+m,y:c}),I.add({x:l.x+a,y:c}),I.add({x:l.x+a,y:l.y+G}),C&&I.reverse(),H(I,h)},!0),B("extend.west2",function($,A,K){var I=$.getSourceAgent(),b=$.getTargetAgent(),t=I.getId()>b.getId(),D=t?b:I,O=t?I:b,G=D.p(),B=O.p(),M=w(K,$,D,p),X=w(K,$,O,p,!0),P=$.s(i),o=P?0:m(K,D)/2,N=P?0:m(K,O)/2,g=M.offset,F=X.offset,C=$.s(z)+(M.size-1)/2*$.s(k),R=a(G.x-o,B.x-N)-C+(G.y<B.y?g:-g),q=new U;return q.add({x:G.x-o,y:G.y+g}),q.add({x:R,y:G.y+g}),q.add({x:R,y:B.y+F}),q.add({x:B.x-N,y:B.y+F}),t&&q.reverse(),H(q,$)},!0),B("extend.east2",function(y,$,V){var X=y.getSourceAgent(),S=y.getTargetAgent(),P=X.getId()>S.getId(),G=P?S:X,n=P?X:S,l=G.p(),b=n.p(),F=w(V,y,G,p),L=w(V,y,n,p,!0),c=y.s(i),f=c?0:m(V,G)/2,o=c?0:m(V,n)/2,A=F.offset,D=L.offset,_=y.s(z)+(F.size-1)/2*y.s(k),C=e(l.x+f,b.x+o)+_+(l.y>b.y?A:-A),s=new U;return s.add({x:l.x+f,y:l.y+A}),s.add({x:C,y:l.y+A}),s.add({x:C,y:b.y+D}),s.add({x:b.x+o,y:b.y+D}),P&&s.reverse(),H(s,y)},!0),B("v.h2",function(S,E,A){return J(S,A,C)},!0),B("h.v2",function(F,R,P){return J(F,P,S)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);